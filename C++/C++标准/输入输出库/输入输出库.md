---
tags:
  - CPP
---
# 输入输出库

C++ 包含两个输入/输出库：现代的、基于流的 I/O 库和 C 风格 I/O 函数的标准集合。

### 基于流的 I/O

基于流的输入/输出库围绕抽象的输入/输出设备组织。这些抽象设备允许相同代码处理对文件、内存流或随即进行任意操作（例如压缩）的自定义适配器设备的输入/输出。

大多数已经被类模板化，故它们能被适配到任何标准字符类型。为最常用的基本字符类型（ `char` 和 `wchar_t` ）提供分离的 `typedef` 。以下列层次将类组织：

![std-io-complete-inheritance.svg](https://www.apiref.com/cpp-zh/common/images/0/06/std-io-complete-inheritance.svg)

---

#### 抽象

| 抽象                                   |                                                                              |
| ------------------------------------ | ---------------------------------------------------------------------------- |
| 定义于头文件 `<ios>`                       |                                                                              |
| [[ios_base\|ios_base]]               | 管理格式化标志和输入/输出异常  <br>(类)                                                     |
| [[basic_ios\|basic_ios]]             | 管理任意流缓冲  <br>(类模板)                                                           |
| 定义于头文件 `<streambuf>`                 |                                                                              |
| [[basic_streambuf\|basic_streambuf]] | 抽象原生设备  <br>(类模板)                                                            |
| 定义于头文件 `<ostream>`                   |                                                                              |
| [[basic_ostream\|basic_ostream]]     | 包装给定的抽象设备（[[basic_streambuf\|basic_streambuf]]）  <br>并提供高层输出接口  <br>(类模板)    |
| 定义于头文件 `<istream>`                   |                                                                              |
| [[basic_istream\|basic_istream]]     | 包装给定的抽象设备（[[basic_streambuf\|basic_streambuf]]）  <br>并提供高层输入接口  <br>(类模板)    |
| [[basic_iostream\|basic_iostream]]   | 包装给定的抽象设备（[[basic_streambuf\|basic_streambuf]]）  <br>并提供高层输入/输出接口  <br>(类模板) |

---

#### 文件 I/O 实现

| 文件 I/O 实现                          |                           |
| ---------------------------------- | ------------------------- |
| **定义于头文件 `<fstream>`**             |                           |
| [[basic_filebuf\|basic_filebuf]]   | 抽象原生文件设备  <br>(类模板)       |
| [[basic_ifstream\|basic_ifstream]] | 实现高层文件流输入操作  <br>(类模板)    |
| [[basic_ofstream\|basic_ofstream]] | 实现高层文件流输出操作  <br>(类模板)    |
| [[basic_fstream\|basic_fstream]]   | 实现高层文件流输入/输出操作  <br>(类模板) |

---

#### 字符串 I/O 实现

| **字符串 I/O 实现**                               |                            |
| -------------------------------------------- | -------------------------- |
| **定义于头文件 `<sstream>`**                       |                            |
| [[basic_stringbuf\|basic_stringbuf]]         | 实现原生字符串设备  <br>(类模板)       |
| [[basic_istringstream\|basic_istringstream]] | 实现高层字符串流输入操作  <br>(类模板)    |
| [[basic_ostringstream\|basic_ostringstream]] | 实现高层字符串流输出操作  <br>(类模板)    |
| [[basic_stringstream\|basic_stringstream]]   | 实现高层字符串流输入/输出操作  <br>(类模板) |

---

##### 数组 I/O 实现

| 数组 I/O 实现                                 |                        |
| ----------------------------------------- | ---------------------- |
| **定义于头文件 `<strstream>`**                  |                        |
| [[strstreambuf\|strstreambuf]](C++98 中弃用) | 实现原生字符数组设备  <br>(类)    |
| [[istrstream\|istrstream]](C++98 中弃用)     | 实现字符数组输入操作  <br>(类)    |
| [[ostrstream\|ostrstream]](C++98 中弃用)     | 实现字符数组输出操作  <br>(类)    |
| [[strstream\|strstream]](C++98 中弃用)       | 实现字符数组输入/输出操作  <br>(类) |

---

##### 同步的输出

| 同步的输出                                           |                      |
| ----------------------------------------------- | -------------------- |
| **定义于头文件 `<syncstream>`**                       |                      |
| [[basic_syncbuf\|basic_syncbuf]](C++20)         | 同步输出设备的包装  <br>(类模板) |
| [[basic_osyncstream\|basic_osyncstream]](C++20) | 同步输出流的包装  <br>(类模板)  |

---

#### `typedef`

提供对常用字符类型的 `typedef` ：

```c++
typedef basic_ios<char>                ios;
typedef basic_ios<wchar_t>            wios;
 
typedef basic_streambuf<char>     streambuf;
typedef basic_streambuf<wchar_t> wstreambuf;
typedef basic_filebuf<char>         filebuf;
typedef basic_filebuf<wchar_t>     wfilebuf;
typedef basic_stringbuf<char>     stringbuf;
typedef basic_stringbuf<wchar_t> wstringbuf;
typedef basic_syncbuf<char>         syncbuf;
typedef basic_syncbuf<wchar_t>     wsyncbuf;
 
typedef basic_istream<char>         istream;
typedef basic_istream<wchar_t>     wistream;
typedef basic_ostream<char>         ostream;
typedef basic_ostream<wchar_t>     wostream;
typedef basic_iostream<char>       iostream;
typedef basic_iostream<wchar_t>   wiostream;
 
typedef basic_ifstream<char>       ifstream;
typedef basic_ifstream<wchar_t>   wifstream;
typedef basic_ofstream<char>       ofstream;
typedef basic_ofstream<wchar_t>   wofstream;
typedef basic_fstream<char>         fstream;
typedef basic_fstream<wchar_t>     wfstream;
 
typedef basic_istringstream<char>     istringstream;
typedef basic_istringstream<wchar_t> wistringstream;
typedef basic_ostringstream<char>     ostringstream;
typedef basic_ostringstream<wchar_t> wostringstream;
typedef basic_stringstream<char>       stringstream;
typedef basic_stringstream<wchar_t>   wstringstream;
 
typedef basic_osyncstream<char>     osyncstream;
typedef basic_osyncstream<wchar_t> wosyncstream;
```

---

#### 预定义标准流对象

| 预定义标准流对象                   |                                                 |
| -------------------------- | ----------------------------------------------- |
| **定义于头文件 `<iostream>`**    |                                                 |
| [[cin, wcin\|cinwcin]]     | 从标准 C 输入流 [[C 风格文件输入输出\|stdin]] 中读取  <br>(全局对象) |
| [[cout, wcout\|coutwcout]] | 写入到标准 C 输出流 [[C 风格文件输入输出\|stdout]](全局对象)        |
| [[cerr, wcerr\|cerrwcerr]] | 写入到标准 C 错误流 [[C 风格文件输入输出\|stderr]]， 无缓冲  (全局对象) |
| [[clog, wclog\|clogwclog]] | 写入到标准 C 错误流 [[C 风格文件输入输出\|stderr]](全局对象)        |

---

#### [[输入输出操纵符|I/O 操纵符]]

基于流的 I/O 库用 [[输入输出操纵符||I/O 操纵符]]（例如 [[boolalpha, noboolalpha|std::boolalpha]] 、 [[dec, hex, oct|std::hex]] 等）控制流的行为。

---

#### 类型

定义下列辅助类型：

| 定义于头文件 `<ios>`             |                                                   |
| -------------------------- | ------------------------------------------------- |
| [[streamoff\|streamoff]]   | 表示相对的文件/流位置（距 fpos 的偏移），足以表示任何文件大小  <br>(typedef) |
| [[streamsize\|streamsize]] | 表示一次 I/O 操作中转移的字符数或 I/O 缓冲区的大小  <br>(typedef)     |
| [[fpos\|fpos]]             | 表示流或文件中的绝对位置  <br>(类模板)                           |

提供下列 [[fpos|std::fpos]]的特化：

| 定义于头文件 `<ios>` |                                                    |
| -------------- | -------------------------------------------------- |
| 类型             | 定义                                                 |
| `streampos`    | `std::fpos<std::char_traits<char>::state_type>`    |
| `wstreampos`   | `std::fpos<std::char_traits<wchar_t>::state_type>` |

---

#### 错误类别接口

| 定义于头文件 `<ios>`                                  |                            |
| ----------------------------------------------- | -------------------------- |
| [[io_errc\|io_errc]](C++11)                     | IO 流的错误码  <br>(枚举)         |
| [[iostream_category\|iostream_category]](C++11) | 鉴别 iostream 错误类别  <br>(函数) |

---
