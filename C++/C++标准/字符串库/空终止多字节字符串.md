---
tags:
  - CPP
---

# 空终止多字节字符串

空终止多字节字符串（ null-terminated multibyte string, NTMBS ），或“多字节字符串”，是后随拥有零值的字节（空终止字符）的非零字节序列。

存储于该字符串中的每个字符可能占用多于一个字节。用于表示字符的编码是本地环境限定的：它可以是 UTF-8 、 GB18030 、 EUC-JP 、 Shift-JIS 等。例如，字符数组 {'\xe4','\xbd','\xa0','\xe5','\xa5','\xbd','\0'} 是一个以UTF8编码包含 "你好" 的 NTMBS ：首三个字节编码字符 "你" ，接下来三个字节编码字符 "好" 。编码于 GB18030 的相同字符串是字符数组 {'\xc4', '\xe3', '\xba', '\xc3', '\0'} ，其中二个字符各编码为双字节序列。

一些多字节编码中，任何给定的多字节字符序列可以根据之前的字节序列，称之为“迁移序列”，表示不同的字符。这种编码被称为状态依赖的：要求知晓当前迁移状态以转译每个字符。 NTMBS 仅若以初始迁移状态开始及结束才合法：若使用迁移序列，则对应的无迁移序列必须在空终止字符前存在。这种编码的例子是 7-bit JIS 、 BOCU-1 及 [SCSU](http://www.unicode.org/reports/tr6) 。

多字节字符串与空终止字节字符串（ NTBS ）布局兼容，即能用相同的设施存储、复制并检验，除了计算字符数。若当前本地环境生效，则 I/O 函数亦处理多字节字符串。多字节字符串可用 [std::codecvt](https://www.apiref.com/cpp-zh/cpp/locale/codecvt.html "cpp/locale/codecvt") 成员函数、 [std::wstring_convert](https://www.apiref.com/cpp-zh/cpp/locale/wstring_convert.html "cpp/locale/wstring convert") 或下列依赖本地环境的转换函数与宽字符串相互转换：

---
